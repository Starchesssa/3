
name: Fetch Unusual YouTube Links

on:
  workflow_dispatch:  # âœ… Manual trigger
  push:               # âœ… Trigger on changes to Products_temp.txt
    paths:
      - 'CATEGORY/Products_temp.txt'

jobs:
  fetch-links:
    runs-on: ubuntu-latest

    env:
      YOUTUBE_API: ${{ secrets.YOUTUBE_API }}

    steps:
      - name: ðŸ“¥ Checkout repository
        uses: actions/checkout@v3

      - name: ðŸ Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: ðŸ“¦ Install dependencies
        run: pip install requests

      - name: ðŸš¦ Check if Products_temp.txt is empty
        id: check_empty
        run: |
          if [ ! -s CATEGORY/Products_temp.txt ]; then
            echo "ðŸ›‘ File is empty. Skipping script."
            echo "empty=true" >> $GITHUB_OUTPUT
          else
            echo "âœ… File has content. Proceeding."
            echo "empty=false" >> $GITHUB_OUTPUT
          fi

      - name: ðŸš€ Run Unusual_links.py
        if: steps.check_empty.outputs.empty == 'false'
        run: python Unusual_links.py
